this is where elf is putting some musings on insane generalisation atm. 
this will be formalised at some point.

some design considerations for general protocol and protocol stack definition:
a) generating 'holder' fields to be revisited later
b) specification of order of revisiting (both protocol and stack level)
c) clean namespace handling
d) definition of default validators, serialisers, etc
   this would also imply a solid library of generalised default types
e) grouping for defaults, perhaps, as well? (complex protocols would benefit)
   multiple ways of doing this.  first thought was to have groups defined 
   by an enclosing keyword, but this could be very silly if, say, there are
   a large set of fields and a small number of default groups, but the groups
   were noncontinuous.  second thought was to label the groups, which seems 
   much better, and avoids namespace issues.
f) definition of union types (separate from holders because they can be computed
   from prior rather than future data)  this would be a big win for almost
   anything with varlen fields (asn.1, dhcp, etc).  would require an extra 
   slot for getting back type, but thats trivially generated.  
g) the union concept gives rise to an idea of abstracting out sequences of 
   fields and treating them as a single unit with a modifier to attach to
   each field name to maintain uniqueness.  this would make many currently
   hideous protocols entirely trivial.
h) more will come...

some technical musings on definition:
a) it really sounds like im talking about objects, doesnt it?
b) but im not!
c) ha ha!!
d) seriously, now, macros are our friends.  we should be able to generalise 
   protocol definition in such a way that all the relevant lambdas, as well 
   as a record-type for that protocol, are all generated automagically. 
e) records are also are friends. removes some of the naming issue.
f) on the issue of actually handling fuzzings, theres some excellent papers
   and work by oleg, on different means of iterators and selectors.
g) im also drafting up some ideas on generalising lambda chains to be
   autogenerated instead of explicitly defined (not to say that its not possible
   to modify them, or change pieces manually, just something to remove most of
   the gruntwork.)


ill be putting more concepts, code, and docs in here as i develop em.  please
comment.

-elf, 12 aug 2007


